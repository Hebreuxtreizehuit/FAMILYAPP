<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <!-- Basic hardening (meta version; real headers come from _headers on Netlify) -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta name="referrer" content="no-referrer">

  <title>Care Board (Home) ‚Ä¢ v2</title>
  <link rel="manifest" href="manifest.json">

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#101723;
      --panel2:#0e1520;
      --text:#e7eef7;
      --muted:#9fb0c2;
      --line:#233246;
      --accent:#4aa3ff;
      --danger:#ff5b6e;
      --ok:#35d07f;
      --warn:#ffcc66;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --radius2:12px;
      --pad:12px;
      --cardpad:12px;
      --font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      --blueA:.16;
      --greenA:.12;
      --liftA:.02;
      --tintA:.16;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:var(--font);
      position: relative;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(74,163,255,var(--blueA)), transparent 60%),
        radial-gradient(900px 500px at 100% 0%, rgba(53,208,127,var(--greenA)), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,var(--liftA)), rgba(0,0,0,0)),
        var(--bg);
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(900px 520px at 18% 8%, rgba(74,163,255,var(--tintA)), transparent 60%),
        radial-gradient(900px 520px at 92% 12%, rgba(53,208,127,var(--tintA)), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,calc(var(--tintA) * .40)), rgba(0,0,0,0));
      mix-blend-mode: screen;
    }

    .topbar, .wrap, .toast { position: relative; z-index: 1; }

    .topbar{
      position:sticky; top:0; z-index:20;
      padding: 14px 14px 10px;
      background: linear-gradient(to bottom, rgba(11,15,20,.92), rgba(11,15,20,.70));
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(35,50,70,.6);
    }

    .row{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      max-width: 1400px; margin:0 auto;
    }

    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 240px;
    }

    .logo{
      width:38px; height:38px; border-radius:12px;
      background: linear-gradient(135deg, rgba(74,163,255,.9), rgba(53,208,127,.7));
      box-shadow: var(--shadow);
    }

    .titlewrap{ display:flex; flex-direction:column; line-height:1.1; }
    .titlewrap .h1{ font-weight:800; font-size:16px; letter-spacing:.2px; }
    .titlewrap .sub{ color:var(--muted); font-size:12px; }

    .controls{
      display:flex; gap:8px; flex-wrap:wrap;
      align-items:center; justify-content:flex-end;
    }

    .input, .select{
      background: rgba(16,23,35,.75);
      border:1px solid rgba(35,50,70,.9);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      outline:none;
      min-height:40px;
    }
    .input{ width:min(360px, 80vw); }
    .select{ padding-right: 34px; }

    .btn{
      border:1px solid rgba(35,50,70,.9);
      background: rgba(16,23,35,.75);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      cursor:pointer;
      min-height:40px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{ border-color: rgba(74,163,255,.6); }
    .btn.primary{
      background: rgba(74,163,255,.18);
      border-color: rgba(74,163,255,.55);
    }
    .btn.danger{
      background: rgba(255,91,110,.12);
      border-color: rgba(255,91,110,.50);
    }
    .btn.ok{
      background: rgba(53,208,127,.12);
      border-color: rgba(53,208,127,.50);
    }

    .pill{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(35,50,70,.9);
      color:var(--muted);
      background: rgba(16,23,35,.5);
      display:inline-flex; align-items:center; gap:6px;
      cursor: default;
      user-select:none;
    }
    .pill.clickable{ cursor:pointer; }

    .savedDot{
      width:8px; height:8px; border-radius:50%;
      background: var(--ok);
      box-shadow: 0 0 0 4px rgba(53,208,127,.15);
    }
    .unsavedDot{
      width:8px; height:8px; border-radius:50%;
      background: var(--warn);
      box-shadow: 0 0 0 4px rgba(255,204,102,.15);
    }
    .miniDot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(74,163,255,.9);
      box-shadow: 0 0 0 4px rgba(74,163,255,.14);
    }

    .wrap{
      max-width: 1400px;
      margin: 10px auto 28px;
      padding: 0 14px;
    }

    .hint{
      color: var(--muted);
      font-size: 12px;
      margin: 6px 0 10px;
    }

    .board{
      display:flex;
      gap:12px;
      align-items:flex-start;
      overflow-x:auto;
      padding: 12px 2px 18px;
      scroll-snap-type: x mandatory;
    }

    .col{
      width: 300px;
      flex: 0 0 auto;
      background: rgba(16,23,35,.70);
      border: 1px solid rgba(35,50,70,.85);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      scroll-snap-align: start;
    }
    .colHeader{
      padding: 12px 12px 8px;
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      border-bottom:1px solid rgba(35,50,70,.6);
    }
    .colTitle{
      font-weight:800;
      font-size:14px;
      letter-spacing:.2px;
      display:flex; align-items:center; gap:8px;
    }
    .count{
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(35,50,70,.7);
      padding: 2px 8px;
      border-radius:999px;
      background: rgba(14,21,32,.55);
    }
    .colBody{
      padding: 10px;
      min-height: 140px;
    }
    .dropHint{
      border:1px dashed rgba(74,163,255,.4);
      background: rgba(74,163,255,.07);
      border-radius: 14px;
    }

    .card{
      background: rgba(14,21,32,.85);
      border:1px solid rgba(35,50,70,.85);
      border-radius: var(--radius2);
      padding: var(--cardpad);
      margin-bottom:10px;
      cursor:pointer;
      user-select:none;
    }
    .card:hover{ border-color: rgba(74,163,255,.45); }

    .cardTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      margin-bottom: 8px;
    }
    .cardTitle{ font-weight:800; font-size:14px; line-height:1.25; }
    .mini{ font-size:12px; color:var(--muted); }

    .badges{ display:flex; flex-wrap:wrap; gap:6px; margin-top: 8px; }
    .badge{
      font-size:11px;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(35,50,70,.75);
      color: var(--muted);
      background: rgba(16,23,35,.55);
    }

    .badge.today{
      color:#d7ecff;
      border-color: rgba(74,163,255,.55);
      background: rgba(74,163,255,.14);
    }
    .badge.overdue{
      color:#ffe3e8;
      border-color: rgba(255,91,110,.55);
      background: rgba(255,91,110,.14);
    }
    .badge.done{
      color:#dff7ea;
      border-color: rgba(53,208,127,.55);
      background: rgba(53,208,127,.14);
    }
    .badge.remind{
      color:#fff3d6;
      border-color: rgba(255,204,102,.65);
      background: rgba(255,204,102,.12);
    }

    .checkline{
      margin-top: 8px;
      display:flex; align-items:center; justify-content:space-between;
      color: var(--muted);
      font-size:12px;
    }
    .bar{
      height:6px; background: rgba(35,50,70,.75);
      border-radius: 999px; overflow:hidden;
      margin-top: 6px;
    }
    .bar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(74,163,255,.9), rgba(53,208,127,.85));
    }

    /* Overlays / modals */
    .overlay{
      position:fixed; inset:0; z-index:50;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center; justify-content:center;
      padding: 18px;
    }
    .overlay.show{ display:flex; }

    .modal{
      width: min(760px, 96vw);
      background: rgba(16,23,35,.96);
      border:1px solid rgba(35,50,70,.95);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* Lock modal tweaks */
    #pinInput { letter-spacing: 6px; font-weight: 800; text-align: center; }

    .modalHead{
      padding: 12px 14px;
      border-bottom:1px solid rgba(35,50,70,.7);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .modalHead .mh{ font-weight:900; }

    .modalBody{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .field{ display:flex; flex-direction:column; gap:6px; }
    label{ font-size:12px; color:var(--muted); }
    .textarea{ resize: vertical; min-height: 90px; max-height: 260px; }
    .full{ grid-column: 1 / -1; }

    .checklist{
      border:1px solid rgba(35,50,70,.85);
      border-radius: 14px;
      padding: 10px;
      background: rgba(14,21,32,.6);
    }

    .checkItem{
      display:flex; align-items:center; gap:10px;
      padding: 8px 8px;
      border-radius: 12px;
    }
    .checkItem:hover{ background: rgba(255,255,255,.03); }

    .checkItem input[type="text"]{
      flex:1;
      background: transparent;
      border: none;
      outline:none;
      color: var(--text);
      font-size: 13px;
    }
    .checkItem .x{
      border:none; background: transparent;
      color: var(--muted);
      cursor:pointer;
      font-size: 18px;
      line-height: 1;
      padding: 2px 6px;
      border-radius: 10px;
    }
    .checkItem .x:hover{ color: var(--danger); }

    .modalFoot{
      padding: 12px 14px;
      border-top:1px solid rgba(35,50,70,.7);
      display:flex; gap:10px; justify-content:space-between; flex-wrap:wrap;
    }
    .leftBtns, .rightBtns{ display:flex; gap:8px; flex-wrap:wrap; }

    .hint2{
      color: var(--muted);
      font-size: 12px;
      margin-top: 8px;
      line-height: 1.35;
    }

    @media (max-width: 740px){
      .modalBody{ grid-template-columns: 1fr; }
    }

    /* Home logo (NOT inside CSS as HTML) */
    .home-logo{
      display:flex;
      justify-content:center;
      align-items:center;
      padding: 18px 0 6px;
      position: relative;
      z-index: 1;
    }
    .home-logo img{
      max-width: 180px;
      width: 100%;
      height: auto;
      opacity: 0.95;
      filter: drop-shadow(0 10px 25px rgba(0,0,0,.45));
    }
    .home-logo{
  display:flex;
  justify-content:center;
  align-items:center;
  padding: 18px 0 6px;
}
.home-logo img{
  width: 160px;      /* change to 120 / 140 / 180 if you want */
  height: auto;
  border-radius: 16px; /* optional */
  filter: drop-shadow(0 10px 22px rgba(0,0,0,.45));
  opacity: .95;
}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="row">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="titlewrap">
          <div class="h1">Care Board (Home) <span class="mini">(v2)</span></div>
          <div class="sub">Trello-style caregiving tasks ‚Ä¢ Autosaves on this device</div>
        </div>
      </div>

      <div class="controls">
        <span class="pill" id="saveStatus" title="Save status">
          <span class="savedDot" id="saveDot"></span><span id="saveText">Saved</span>
        </span>

        <span class="pill clickable" id="weatherPill" title="Click to set city / refresh weather">
          <span class="miniDot"></span><span id="weatherText">Weather: ‚Äî</span>
        </span>

        <button class="btn" id="calendarBtn" title="Calendar view">üìÖ Calendar</button>
        <button class="btn" id="alertsBtn" title="Enable browser notifications">üîî Enable Alerts</button>

        <input class="input" id="search" placeholder="Search tasks‚Ä¶ (title, notes, checklist)" />
        <select class="select" id="filter">
          <option value="all">Show: All</option>
          <option value="today">Show: Due Today</option>
          <option value="overdue">Show: Overdue</option>
          <option value="open">Show: Open (not fully done)</option>
        </select>

        <button class="btn ok" id="newDayBtn" title="Resets checklists for tasks marked Daily">New Day (reset daily)</button>
        <button class="btn" id="exportBtn">Export</button>
        <button class="btn" id="importBtn">Import</button>

        <!-- Lock controls -->
        <button class="btn" id="lockNowBtnTop" title="Lock the app now">üîí Lock</button>
        <button class="btn" id="changePinBtnTop" title="Set or change PIN">üîë PIN</button>

        <button class="btn primary" id="addCardQuick">+ Add Task</button>
      </div>
    </div>
  </div>

 <div class="home-logo">
  <img
    src="icon-512.png"
    srcset="icon-192.png 192w, icon-512.png 512w"
    sizes="(max-width: 600px) 160px, 220px"
    alt="Care Board logo"
  >
</div>
  <div class="wrap">
    <div class="hint">
      Tip: Drag cards between columns. Click a card to edit.
      Try <b>Ctrl + Shift + R</b> if you don‚Äôt see updates.
    </div>
    <div class="board" id="board" aria-label="Care board columns"></div>
  </div>

  <!-- Task Modal -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modalHead">
        <div class="mh" id="modalTitle">Edit Task</div>
        <button class="btn" id="closeModal" aria-label="Close">Close</button>
      </div>

      <div class="modalBody">
        <div class="field full">
          <label>Task title</label>
          <input class="input" id="m_title" placeholder="e.g., Morning routine ‚Äì Daughter A" />
        </div>

        <div class="field">
          <label>For</label>
          <select class="select" id="m_for">
            <option value="Daughter A">Daughter A</option>
            <option value="Daughter B">Daughter B</option>
            <option value="Both">Both</option>
            <option value="Family/Admin">Family/Admin</option>
          </select>
        </div>

        <div class="field">
          <label>Assigned to</label>
          <select class="select" id="m_assigned">
            <option value="Mom">Mom</option>
            <option value="Dad">Dad</option>
            <option value="Both">Both</option>
          </select>
        </div>

        <div class="field">
          <label>Due date (optional)</label>
          <input class="input" id="m_due" type="date"/>
        </div>

        <div class="field">
          <label>Repeat</label>
          <select class="select" id="m_repeat">
            <option value="none">No repeat</option>
            <option value="daily">Daily</option>
          </select>
        </div>

        <div class="field full">
          <label>Reminder (alarm)</label>
          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <label style="display:flex; gap:8px; align-items:center; cursor:pointer; color:var(--text);">
              <input type="checkbox" id="m_remindOn" />
              Enable reminder
            </label>
            <input class="input" id="m_remindTime" type="time" style="max-width:180px;" />
            <span class="mini">Tip: Click ‚ÄúEnable Alerts‚Äù in the top bar for notifications.</span>
          </div>
        </div>

        <div class="field full">
          <label>Notes</label>
          <textarea class="input textarea" id="m_notes" placeholder="Short notes, instructions, or reminders‚Ä¶"></textarea>
        </div>

        <div class="field full">
          <label>Checklist</label>
          <div class="checklist" id="checklist"></div>
          <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;">
            <button class="btn" id="addCheckItem">+ Add checklist item</button>
            <button class="btn" id="markAllDone">Mark all done</button>
            <button class="btn" id="clearDone">Clear done</button>
          </div>
          <div class="hint2">Checklist is great for step-by-step routines.</div>
        </div>
      </div>

      <div class="modalFoot">
        <div class="leftBtns">
          <button class="btn danger" id="deleteTask">Delete</button>
          <button class="btn" id="duplicateTask">Duplicate</button>
        </div>
        <div class="rightBtns">
          <button class="btn" id="cancelTask">Cancel</button>
          <button class="btn primary" id="saveTask">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Export/Import Modal -->
  <div class="overlay" id="ioOverlay" role="dialog" aria-modal="true" aria-labelledby="ioTitle">
    <div class="modal">
      <div class="modalHead">
        <div class="mh" id="ioTitle">Export / Import</div>
        <button class="btn" id="closeIO">Close</button>
      </div>
      <div class="modalBody">
        <div class="field full">
          <label>Board data (JSON)</label>
          <textarea class="input textarea" id="ioText" style="min-height:220px;" placeholder="Use Export to copy. Use Import to paste."></textarea>
          <div class="hint2">
            Export creates a backup. Import replaces your current board on this device.
          </div>
        </div>
      </div>
      <div class="modalFoot">
        <div class="leftBtns">
          <button class="btn" id="copyIO">Copy</button>
        </div>
        <div class="rightBtns">
          <button class="btn danger" id="doImport">Import (replace)</button>
          <button class="btn ok" id="doExport">Export (refresh)</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Calendar Modal -->
  <div class="overlay" id="calOverlay" role="dialog" aria-modal="true" aria-labelledby="calTitle">
    <div class="modal">
      <div class="modalHead">
        <div class="mh" id="calTitle">Calendar</div>
        <button class="btn" id="closeCal">Close</button>
      </div>
      <div class="modalBody" style="grid-template-columns: 1.4fr .6fr;">
        <div class="field full" style="grid-column: 1 / 2;">
          <div style="display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap;">
            <div style="display:flex; gap:8px; align-items:center;">
              <button class="btn" id="calPrev">‚óÄ</button>
              <button class="btn" id="calToday">Today</button>
              <button class="btn" id="calNext">‚ñ∂</button>
            </div>
            <div class="pill"><span id="calMonthLabel"></span></div>
          </div>

          <div style="margin-top:10px;">
            <div id="calDowRow" style="margin-bottom:8px;"></div>
            <div id="calGrid"></div>
          </div>
        </div>

        <div class="field full" style="grid-column: 2 / 3;">
          <label>Selected day</label>
          <div style="margin-bottom:10px;">
            <div style="display:flex; justify-content:space-between; gap:10px; align-items:center;">
              <div style="font-weight:900;" id="calSelectedLabel">‚Äî</div>
              <div class="mini" id="calSelectedMeta"></div>
            </div>
          </div>

          <label>Tasks</label>
          <div id="calTaskList" style="min-height:220px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Weather Modal -->
  <div class="overlay" id="wxOverlay" role="dialog" aria-modal="true" aria-labelledby="wxTitle">
    <div class="modal">
      <div class="modalHead">
        <div class="mh" id="wxTitle">Weather</div>
        <button class="btn" id="closeWx">Close</button>
      </div>
      <div class="modalBody">
        <div class="field full">
          <label>City (saved on this device)</label>
          <input class="input" id="wxCity" placeholder="e.g., Hamilton, Ontario" />
          <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;">
            <button class="btn ok" id="wxSave">Save City</button>
            <button class="btn" id="wxRefresh">Refresh Weather</button>
          </div>
          <div class="hint2" id="wxStatus">Enter a city, save, then refresh.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ ONE App Lock Overlay (OUTSIDE script) -->
  <div class="overlay" id="lockOverlay" role="dialog" aria-modal="true" aria-labelledby="lockTitle">
    <div class="modal" style="max-width:420px;">
      <div class="modalHead">
        <div class="mh" id="lockTitle">Care Board Locked</div>
      </div>

      <div class="modalBody" style="display:grid; grid-template-columns:1fr; gap:12px;">
        <div class="field full">
          <label id="lockLabel">Enter PIN</label>
          <input class="input" id="pinInput" type="password" inputmode="numeric" autocomplete="off"
                 placeholder="4‚Äì6 digit PIN" maxlength="6" />
          <div class="hint2" id="pinHint">Tip: Choose something you can remember.</div>
        </div>

        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <button class="btn primary" id="unlockBtn">Unlock</button>
          <button class="btn ok" id="setPinBtn">Set / Change PIN</button>
        </div>
      </div>
    </div>
  </div>

  <script>
  (() => {
    // -----------------------
    // Storage keys
    // -----------------------
    const STORAGE_KEY = "care_board_v1";
    const WX_KEY = "care_board_city_v1";
    const PIN_KEY = "care_board_pin_v1";
    const LOCKED_KEY = "care_board_locked_v1";

    // -----------------------
    // App Lock (works offline)
    // -----------------------
    const lockOverlay = document.getElementById("lockOverlay");
    const pinInput = document.getElementById("pinInput");
    const unlockBtn = document.getElementById("unlockBtn");
    const setPinBtn = document.getElementById("setPinBtn");
    const lockNowBtnTop = document.getElementById("lockNowBtnTop");
    const changePinBtnTop = document.getElementById("changePinBtnTop");

    const showLock = (show) => {
      lockOverlay.classList.toggle("show", show);
      if (show) setTimeout(() => pinInput?.focus(), 50);
    };

    const getPin = () => localStorage.getItem(PIN_KEY) || "";
    const setPin = (pin) => localStorage.setItem(PIN_KEY, pin);

    const setLocked = (v) => localStorage.setItem(LOCKED_KEY, v ? "1" : "0");
    const isLocked = () => localStorage.getItem(LOCKED_KEY) === "1";

    const normalizePin = (s) => (s || "").replace(/\D/g, "").slice(0, 6);

    const ensurePin = () => {
      const existing = getPin();
      if (existing) return true;

      const p1 = normalizePin(prompt("Set a PIN (4‚Äì6 digits):") || "");
      if (p1.length < 4) { alert("PIN must be 4‚Äì6 digits."); return false; }

      const p2 = normalizePin(prompt("Confirm PIN:") || "");
      if (p1 !== p2) { alert("PINs do not match."); return false; }

      setPin(p1);
      alert("PIN saved on this device ‚úÖ");
      return true;
    };

    const lockNow = () => {
      if (!ensurePin()) return;
      setLocked(true);
      showLock(true);
    };

    const unlock = () => {
      const entered = normalizePin(pinInput.value);
      const saved = getPin();

      if (!saved) {
        alert("No PIN set yet. Click ‚ÄúSet / Change PIN‚Äù.");
        return;
      }
      if (entered !== saved) {
        alert("Wrong PIN.");
        pinInput.value = "";
        pinInput.focus();
        return;
      }
      setLocked(false);
      showLock(false);
      pinInput.value = "";
    };

    // Button events
    unlockBtn.addEventListener("click", unlock);
    pinInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") unlock();
    });

    setPinBtn.addEventListener("click", () => {
      ensurePin();
      pinInput.focus();
    });

    lockNowBtnTop.addEventListener("click", lockNow);
    changePinBtnTop.addEventListener("click", () => ensurePin());

    // Lock on start if flagged locked
    if (isLocked()) showLock(true);

    // -----------------------
    // The rest of your app JS
    // -----------------------
    // ‚úÖ IMPORTANT:
    // Keep your existing Care Board JS here.
    // Your previous code is very large, so I‚Äôm not re-pasting all of it again.
    //
    // The key fix was: DO NOT paste ANY <div> HTML inside this <script>.
    //
    // If you want, paste your remaining JS from your old file *starting from*
    // "const todayISO = () => ..." down to your render() calls.
    //
    // (Your UI will work again because the HTML is now placed correctly.)
  })();
  </script>
</body>
</html>
